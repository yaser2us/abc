import{useState as e,Children as o,useMemo as t,useEffect as r,cloneElement as n}from"react";import{GrowthBook as l,GrowthBookProvider as s}from"@growthbook/growthbook-react";import a from"url-parse";import{merge as c}from"lodash";function u(){return u=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},u.apply(this,arguments)}function i(e,o){return o[e]?o[e]:e}const p=({children:a,getModel:c,updateModel:i,model:p})=>{const{misc:{iamABCTester:m,abcScope:d,abcEndpoint:g,abcEnable:y,abcSdk:f,abcTimeout:b=3e4}}=c(["misc"]);console.log(m,d,f,"[ABCProvider] iamABCTester",y);const[v,F]=e(!1),A=o.toArray(a),C=t(()=>{if(m)return console.log(m,"iamABCTesteriamABCTester useMemo"),new l({apiHost:g,clientKey:f})},[g,m]);return r(()=>{m&&p.misc.abcEnable&&C.loadFeatures({timeout:b}).then(()=>{F(!0)})},[p.misc.abcEnable,p.misc.iamABCTester]),r(()=>{v&&((()=>{if(m&&p.misc.abcEnable){allFeatures=C.getFeatures(),console.log(m,"evaluateFeatures gbs",allFeatures);let e={};Object.keys(allFeatures).map(o=>{console.log(o,"inside itemmmmmmmz ;) ->>>>>",allFeatures[o]);const t=C.getFeatureValue(o,allFeatures[o].defaultValue);e[o]={defaultValue:allFeatures[o].defaultValue,result:t},console.log(o,t,"inside <<<<<<------ result")}),console.log(e,"done itemmmmmmmz ;) result"),groupedData=function(e){let o={};for(const t in e)if(e.hasOwnProperty(t)){const r=t.split("-"),n=r[0],l=e[t];if(o[n]||(o[n]={}),"api"===n)o[n][l.defaultValue]=l.result;else if("response"===n)o[n]=u({},o[n],l.result);else if("context"===n){const e=r.slice(1).join("-"),t=l.result;console.log(e,t,"contexttttttt"),o=u({},o,t)}}return console.log(o,"yyyyyyyyyyyyyyyyyyyy"),o}(e),console.log("sssssssss group abc abc yasser",groupedData),i(u({},groupedData))}})(),console.log("evaluateFeatures"))},[v,p.misc.iamABCTester]),console.log("NavigationContainer mounted",m),h(s,{growthbook:C},o.map(A,(e,o)=>(console.log(o,"44444444444444"),n(e,{}))))};function m({getModel:e,response:o}){try{var t,r,n;const l=(null==(t=e(["response"]))?void 0:t.response)||{},s=o.config.url;return o=c(o,i(s,l)),console.log("[responseInterceptor] Request URL:",s),console.log("[responseInterceptor] context",null==(r=e(["response"]))?void 0:r.response),console.log("[responseInterceptor] data",null==(n=o)?void 0:n.data),o}catch(e){return console.log("[responseInterceptor]",e),o}}function d({getModel:e,request:o}){try{var t;const r=(null==(t=e(["api"]))?void 0:t.api)||{},n=e("requests")||{enabled:!1,headers:{},prefix:""};return o.url=i(o.url,r),n.enabled&&(o.url=function(e,o=""){if(""===o)return e;const t=new a(e);return t.pathname=`/${o}${null==t?void 0:t.pathname}`,console.log("[addQuarantineSegmentToUrl]",t),t.toString()}(o.url,n.prefix)),console.log(n,null==o?void 0:o.headers,null==n?void 0:n.enabled,null==o?void 0:o.url,"[requestInterceptor] details"),o}catch(e){return console.log("[requestInterceptor] error:",e),o}}export{p as ABCProvider,d as requestInterceptor,m as responseInterceptor};
//# sourceMappingURL=index.modern.mjs.map
