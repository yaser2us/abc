import{useState as e,Children as o,useMemo as r,useEffect as t,cloneElement as n}from"react";import{GrowthBook as l,GrowthBookProvider as a}from"@growthbook/growthbook-react";import s from"url-parse";import{merge as u}from"lodash";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},i.apply(this,arguments)}function c(e,o){return o[e]?o[e]:e}var p=function(s){var u=s.children,c=s.updateModel,p=s.model,m=(0,s.getModel)(["misc"]).misc,d=m.iamABCTester,g=m.abcEndpoint,f=m.abcSdk,v=m.abcTimeout,y=void 0===v?3e4:v;console.log(d,m.abcScope,f,"[ABCProvider] iamABCTester",m.abcEnable);var b=e(!1),F=b[0],A=b[1],C=o.toArray(u),T=r(function(){if(d)return console.log(d,"iamABCTesteriamABCTester useMemo"),new l({apiHost:g,clientKey:f})},[g,d]);return t(function(){d&&p.misc.abcEnable&&T.loadFeatures({timeout:y}).then(function(){A(!0)})},[p.misc.abcEnable,p.misc.iamABCTester]),t(function(){F&&(function(){if(d&&p.misc.abcEnable){allFeatures=T.getFeatures(),console.log(d,"evaluateFeatures gbs",allFeatures);var e={};Object.keys(allFeatures).map(function(o){console.log(o,"inside itemmmmmmmz ;) ->>>>>",allFeatures[o]);var r=T.getFeatureValue(o,allFeatures[o].defaultValue);e[o]={defaultValue:allFeatures[o].defaultValue,result:r},console.log(o,r,"inside <<<<<<------ result")}),console.log(e,"done itemmmmmmmz ;) result"),groupedData=function(e){var o={};for(var r in e)if(e.hasOwnProperty(r)){var t=r.split("-"),n=t[0],l=e[r];if(o[n]||(o[n]={}),"api"===n)o[n][l.defaultValue]=l.result;else if("response"===n)o[n]=i({},o[n],l.result);else if("context"===n){var a=t.slice(1).join("-"),s=l.result;console.log(a,s,"contexttttttt"),o=i({},o,s)}}return console.log(o,"yyyyyyyyyyyyyyyyyyyy"),o}(e),console.log("sssssssss group abc abc yasser",groupedData),c(i({},groupedData))}}(),console.log("evaluateFeatures"))},[F,p.misc.iamABCTester]),console.log("NavigationContainer mounted",d),h(a,{growthbook:T},o.map(C,function(e,o){return console.log(o,"44444444444444"),n(e,{})}))};function m(e){var o=e.getModel,r=e.response;try{var t,n,l,a=(null==(t=o(["response"]))?void 0:t.response)||{},s=r.config.url;return r=u(r,c(s,a)),console.log("[responseInterceptor] Request URL:",s),console.log("[responseInterceptor] context",null==(n=o(["response"]))?void 0:n.response),console.log("[responseInterceptor] data",null==(l=r)?void 0:l.data),r}catch(e){return console.log("[responseInterceptor]",e),r}}function d(e){var o=e.getModel,r=e.request;try{var t,n=(null==(t=o(["api"]))?void 0:t.api)||{},l=o("requests")||{enabled:!1,headers:{},prefix:""};return r.url=c(r.url,n),l.enabled&&(r.url=function(e,o){if(void 0===o&&(o=""),""===o)return e;var r=new s(e);return r.pathname="/"+o+(null==r?void 0:r.pathname),console.log("[addQuarantineSegmentToUrl]",r),r.toString()}(r.url,l.prefix)),console.log(l,null==r?void 0:r.headers,null==l?void 0:l.enabled,null==r?void 0:r.url,"[requestInterceptor] details"),r}catch(e){return console.log("[requestInterceptor] error:",e),r}}export{p as ABCProvider,d as requestInterceptor,m as responseInterceptor};
//# sourceMappingURL=index.modern.js.map
