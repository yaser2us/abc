{"version":3,"file":"index.js","sources":["../src/tools/Tools.js","../src/providers/ABCProvider.js","../src/interceptors/Interceptors.js"],"sourcesContent":["import URL from \"url-parse\";\n\nfunction mapUrls(url, urlMappings) {\n    if (urlMappings[url]) {\n        return urlMappings[url];\n    }\n    return url;\n}\n\nfunction addQuarantineSegmentToUrl(originalUrl, quarantineSegment = \"\") {\n    if (quarantineSegment === \"\") return originalUrl;\n\n    // Parse the original URL\n    const url = new URL(originalUrl);\n\n    // Insert the quarantine segment after the domain in the pathname\n    url.pathname = `/${quarantineSegment}${url?.pathname}`;\n    console.log(\"[addQuarantineSegmentToUrl]\", url);\n    // Get the modified URL\n    const modifiedUrl = url.toString();\n\n    return modifiedUrl;\n}\n\nfunction mergeHeaders(originalHeaders = {}, newHeaders = {}) {\n    // Get the modified headers\n    const modifiedHeaders = merge(originalHeaders, newHeaders);\n    console.log(modifiedHeaders, \"[mergeHeaders]\");\n\n    return modifiedHeaders;\n}\n\nfunction groupByPrefixAndStructure(data) {\n    let grouped = {};\n\n    for (const key in data) {\n        if (data.hasOwnProperty(key)) {\n            const parts = key.split(\"-\");\n            const prefix = parts[0];\n            const valueObject = data[key];\n\n            if (!grouped[prefix]) {\n                grouped[prefix] = {};\n            }\n\n            if (prefix === \"api\") {\n                const defaultValue = valueObject.defaultValue;\n                const result = valueObject.result;\n                grouped[prefix][defaultValue] = result; // Use \"defaultValue\" as key and \"result\" as value for \"api\" prefix\n            } else if (prefix === \"response\") {\n                // const defaultValue = valueObject.defaultValue.url;\n                const result = valueObject.result;\n                // grouped[prefix][defaultValue] = result;\n\n                grouped[prefix] = {\n                    ...grouped[prefix],\n                    ...result,\n                };\n            } else if (prefix === \"context\") {\n                const keyWithoutPrefix = parts.slice(1).join(\"-\"); // Remove the prefix\n                const result = valueObject.result;\n                console.log(keyWithoutPrefix, result, \"contexttttttt\");\n\n                //   grouped[prefix][keyWithoutPrefix] = result; // Remove prefix and use \"result\" as value for other prefixes\n                grouped = {\n                    ...grouped,\n                    ...result,\n                };\n                // grouped[prefix] = {\n                //     ...grouped[prefix],\n                //     ...result\n                // }; // Remove prefix and use \"result\" as value for other prefixes\n            }\n        }\n    }\n\n    console.log(grouped, \"yyyyyyyyyyyyyyyyyyyy\");\n    return grouped;\n}\n\nexport {\n    mergeHeaders,\n    addQuarantineSegmentToUrl,\n    groupByPrefixAndStructure,\n    mapUrls\n}","import React, {\n    useEffect, useState,\n    useMemo,\n    useCallback, Children, cloneElement\n  } from \"react\";\n  \nimport {\n    GrowthBook,\n    GrowthBookProvider,\n    useFeatureValue,\n    useFeatureIsOn,\n    useFeature,\n    useGrowthBook,\n  } from \"@growthbook/growthbook-react\";\n\n  import {\n    groupByPrefixAndStructure\n  } from \"../tools\"\n  // Function to group objects based on prefix and structure  \n  \n  const ABCProvider = ({ children, getModel, updateModel, model }) => {\n    const {\n      misc: { \n        iamABCTester, \n        abcScope, \n        abcEndpoint,\n        abcEnable,\n        abcSdk,\n        abcTimeout = 30000\n     },\n    } = getModel([\"misc\"]);\n  \n    console.log(iamABCTester, abcScope, abcSdk, \"[ABCProvider] iamABCTester\", abcEnable);\n  \n    const [isReady, setIsReady] = useState(false);\n  \n    const arrayChildren = Children.toArray(children);\n  \n    const gb = useMemo(\n      () => {\n        if (iamABCTester) {\n          console.log(iamABCTester, \"iamABCTesteriamABCTester useMemo\");\n          const gb = new GrowthBook({\n            apiHost: abcEndpoint, //\"https://growthbook-api-dev.maybanksandbox.com/\",\n            clientKey: abcSdk, //\"sdk-cAC7AQGd1GAEedY\",\n            // Enable easier debugging during development\n            // enableDevMode: true,\n            // Update the instance in realtime as features change in GrowthBook\n            // subscribeToChanges: true,\n            // Only required for A/B testing\n            // Called every time a user is put into an experiment\n            // trackingCallback: (experiment, result) => {\n            //   console.log(\"Experiment Viewed\", {\n            //     experimentId: experiment.key,\n            //     variationId: result.key,\n            //   });\n            // },\n            // onFeatureUsage: (featureKey, result) => {\n            //   console.log(\"feature\", featureKey, \"has value\", result.value);\n            // },\n          });\n          return gb;\n        }\n      },\n      [abcEndpoint, iamABCTester]\n    );\n  \n    useEffect(() => {\n      if (iamABCTester && model.misc.abcEnable) {\n        gb.loadFeatures({\n            timeout: abcTimeout,\n        }).then(() => {\n          setIsReady(true);\n        });\n      }\n    }, [model.misc.abcEnable, model.misc.iamABCTester]);\n  \n    const evaluateFeatures = () => {\n      if (iamABCTester && model.misc.abcEnable) {\n        allFeatures = gb.getFeatures();\n        console.log(iamABCTester, \"evaluateFeatures gbs\", allFeatures);\n  \n        let done = {};\n        Object.keys(allFeatures).map((key) => {\n          console.log(key, \"inside itemmmmmmmz ;) ->>>>>\", allFeatures[key]);\n          const result = gb.getFeatureValue(key, allFeatures[key].defaultValue);\n          done[key] = {\n            defaultValue: allFeatures[key].defaultValue,\n            result,\n          };\n          console.log(key, result, \"inside <<<<<<------ result\");\n        });\n  \n        console.log(done, \"done itemmmmmmmz ;) result\");\n  \n        // Call the function to group by prefix\n        groupedData = groupByPrefixAndStructure(done);\n  \n        console.log(\"sssssssss group abc abc yasser\", groupedData);\n  \n        updateModel({ ...groupedData });\n      }\n    };\n  \n    useEffect(() => {\n      if (!isReady) {\n        return;\n      }\n  \n    //   gb.setAttributes({\n    //     did: \"scope\",\n    //   });\n  \n      evaluateFeatures();\n      console.log(\"evaluateFeatures\");\n    }, [isReady, model.misc.iamABCTester]);\n  \n    console.log(\"NavigationContainer mounted\", iamABCTester);\n  \n    const renderChild  = () => {\n        return Children.map(arrayChildren, (child, index) => {\n            console.log(index, \"44444444444444\");\n            return cloneElement(child, {});\n          })\n    }\n\n    return (\n        // !model.misc.abcEnable && renderChild() ||\n      <GrowthBookProvider growthbook={gb}>\n        {Children.map(arrayChildren, (child, index) => {\n          console.log(index, \"44444444444444\");\n          return cloneElement(child, {});\n        })}\n      </GrowthBookProvider>\n    );\n  };\n  \n  export default ABCProvider;\n  \n  // import styles from './styles.module.css'\n  \n  // // export const ExampleComponent = ({ text }) => {\n  // //   return <div className={styles.test}>    yasser ;) Component: {text}</div>\n  // // }\n  \n  // import React,\n  // {\n  //   useEffect,\n  //   useState,\n  //   useCallback,\n  //   Children, \n  //   cloneElement\n  // } from 'react';\n  // import {\n  //   GrowthBook,\n  //   GrowthBookProvider,\n  //   useFeatureValue,\n  //   useFeatureIsOn,\n  //   useFeature,\n  //   useGrowthBook,\n  // } from \"@growthbook/growthbook-react\";\n  // // import CustomABC from \"./CustomABC\";\n  \n  // // Create a GrowthBook instance\n  // const gb = new GrowthBook({\n  //   apiHost: \"https://growthbook-api-dev.maybanksandbox.com\",\n  //   clientKey: \"sdk-cAC7AQGd1GAEedY\",\n  //   // Enable easier debugging during development\n  //   enableDevMode: true,\n  //   // Update the instance in realtime as features change in GrowthBook\n  //   subscribeToChanges: true,\n  //   // Only required for A/B testing\n  //   // Called every time a user is put into an experiment\n  //   trackingCallback: (experiment, result) => {\n  //     console.log(\"Experiment Viewed\", {\n  //       experimentId: experiment.key,\n  //       variationId: result.key,\n  //     });\n  //   },\n  //   onFeatureUsage: (featureKey, result) => {\n  //     console.log(\"feature\", featureKey, \"has value\", result.value);\n  //   },\n  // });\n  \n  // // Function to group objects based on prefix and structure\n  // function groupByPrefixAndStructure(data) {\n  //   let grouped = {};\n  \n  //   for (const key in data) {\n  //     if (data.hasOwnProperty(key)) {\n  //       const parts = key.split(\"-\");\n  //       const prefix = parts[0];\n  //       const valueObject = data[key];\n  \n  //       if (!grouped[prefix]) {\n  //         grouped[prefix] = {};\n  //       }\n  \n  //       // switch (prefix) {\n  //       //     case \"api\":\n  //       //         const defaultValue = valueObject.defaultValue;\n  //       //         // const result = valueObject.result;\n  //       //         grouped[prefix][defaultValue] = valueObject.result;\n  //       //         break;\n  //       //     case \"response\":\n  //       //         // const result = valueObject.result;\n  //       //         // grouped[prefix][defaultValue] = result;\n  \n  //       //         grouped[prefix] = {\n  //       //             ...grouped[prefix],\n  //       //             ...valueObject.result,\n  //       //         };\n  //       //         break;\n  \n  //       //     case \"context\":\n  //       //         const keyWithoutPrefix = parts.slice(1).join(\"-\"); // Remove the prefix\n  //       //         // const result = valueObject.result;\n  //       //         //   grouped[prefix][keyWithoutPrefix] = result; // Remove prefix and use \"result\" as value for other prefixes\n  //       //         grouped = {\n  //       //             ...grouped,\n  //       //             ...valueObject.result,\n  //       //         };\n  //       //         break;\n  \n  //       //     case \"quarantine\":\n  //       //         console.log(valueObject,\"valueObject quarantine\", valueObject.result)\n  //       //         grouped = {\n  //       //             ...grouped,\n  //       //             quarantine: \"yasser\"//valueObject.result && \"true\" || \"false\",\n  //       //         };\n  \n  //       //         break;\n  //       // }\n  \n  //       if (prefix === \"api\") {\n  //         const defaultValue = valueObject.defaultValue;\n  //         const result = valueObject.result;\n  //         grouped[prefix][defaultValue] = result; // Use \"defaultValue\" as key and \"result\" as value for \"api\" prefix\n  //       } else if (prefix === \"response\") {\n  //         // const defaultValue = valueObject.defaultValue.url;\n  //         const result = valueObject.result;\n  //         // grouped[prefix][defaultValue] = result;\n  \n  //         grouped[prefix] = {\n  //           ...grouped[prefix],\n  //           ...result,\n  //         };\n  //       } else if (prefix === \"context\") {\n  //         const keyWithoutPrefix = parts.slice(1).join(\"-\"); // Remove the prefix\n  //         const result = valueObject.result;\n  //         console.log(keyWithoutPrefix, result, \"contexttttttt\");\n  \n  //         //   grouped[prefix][keyWithoutPrefix] = result; // Remove prefix and use \"result\" as value for other prefixes\n  //         grouped = {\n  //           ...grouped,\n  //           ...result,\n  //         };\n  //         // grouped[prefix] = {\n  //         //     ...grouped[prefix],\n  //         //     ...result\n  //         // }; // Remove prefix and use \"result\" as value for other prefixes\n  //       }\n  //     }\n  //   }\n  \n  //   console.log(grouped, \"yyyyyyyyyyyyy43424sss3yyyyyyy\");\n  //   return grouped;\n  // }\n  \n  // const ABCProvider = ({ children, getModel, updateModel, model }) => {\n  \n  //   const {\n  //     misc: {\n  //       iamABCTester,\n  //     }\n  //   } = getModel([\n  //     \"misc\"\n  //   ]);\n  \n  //   let allFeatures = {};\n  //   let groupedData = {};\n  \n  //   console.log(iamABCTester,\"iamABCTesteriamABCTester\")\n  \n  //   const [isReady, setIsReady] = useState(false);\n  \n  //   const arrayChildren = Children.toArray(children);\n  \n  //   useEffect(() => {\n  //     if(iamABCTester){\n  //       gb.loadFeatures().then(response => {\n  //         console.log('yasssereeeeee', response);\n  //         setIsReady(true);\n  //       })\n  //     }\n     \n  //     // Load feature definitions from GrowthBook API\n  //     // fetch(\n  //     //   'https://growthbook-api-dev.maybanksandbox.com/api/features/sdk-cAC7AQGd1GAEedY',\n  //     // ).then(response => response.json())\n  //     //   .then(data => {\n  //     //     console.log('yassser', data)\n  //     //     gb.setFeatures(data.features);\n  //     //     updateLoaded(data.features)\n  //     //   })\n  //     //   .catch(error => console.error(error,'errrrorrororor'))\n  //     //   .finally(() => {\n  //     //     setIsReady(true);\n  //     //   });\n  //   }, [model.misc]);\n      \n  //   const evaluateFeatures = () => {\n  //     allFeatures = gb.getFeatures();\n  \n  //     console.log(iamABCTester,'evaluateFeatures gbs', allFeatures);\n  \n  //     if (iamABCTester) {\n  //       // const growthbook = useGrowthBook();\n  \n  //       // allFeatures = gb.getFeatures();\n  //       console.log(allFeatures, \"evaluateFeatures gbs xyz\");\n  \n  //       let done = {};\n  //       Object.keys(allFeatures).map((key) => {\n  //         console.log(key, \"inside itemmmmmmmz ;) ->>>>>\",allFeatures[key]);\n  //         const result = gb.getFeatureValue(key, allFeatures[key].defaultValue);\n  //         done[key] = {\n  //           defaultValue: allFeatures[key].defaultValue,\n  //           result,\n  //         };\n  //         console.log(key, result, \"inside <<<<<<------ result\");\n  //       });\n  \n  //       console.log(done, \"done itemmmmmmmz ;) result\");\n  \n  //       // Call the function to group by prefix\n  //       groupedData = groupByPrefixAndStructure(done);\n  \n  //       console.log(\"sssssssss group abc abc yasser\", groupedData);\n  //       updateModel({...groupedData})\n  //     }\n  //   };\n  \n  //   useEffect(() => {\n  //     if (!isReady) {\n  //       return;\n  //     }\n  \n  //     gb.setAttributes({\n  //       did: \"yasser\",\n  //     });\n  \n  //     evaluateFeatures();\n  //     console.log('evaluateFeatures');\n  //   }, [isReady, model.misc]);\n  \n  //   console.log('NavigationContainer mounted', iamABCTester);\n  \n  //   return (\n  //     <GrowthBookProvider growthbook={gb}>\n  //       {\n  //         Children.map(arrayChildren, (child, index) => {\n  //           console.log(index,'444444444444443')\n  //           return cloneElement(child, {\n  //             // isReady,\n  //           })\n  //         })\n  //       }\n  //     </GrowthBookProvider>\n  //   );\n  // };\n  \n  // export default ABCProvider;","import { get, merge } from \"lodash\";\n\nimport {\n    mergeHeaders,\n    addQuarantineSegmentToUrl,\n    mapUrls\n} from \"../tools\"\n\nfunction responseInterceptor({ getModel, response }) {\n    // Modify the response data here mapUrls\n    // const { getModel } = ApiManager.context.controller;\n    try {\n        const dictionary = getModel([\"response\"])?.response || {};\n        const responseUrl = response.config.url;\n\n        response = merge(response, mapUrls(responseUrl, dictionary));\n        console.log(\"[responseInterceptor] Request URL:\", responseUrl);\n        console.log(\"[responseInterceptor] context\", getModel([\"response\"])?.response);\n        console.log(\"[responseInterceptor] data\", response?.data);\n        return response;\n    } catch(error) {\n        console.log('[responseInterceptor]', error)\n        return response\n    }\n}\nfunction requestInterceptor({ getModel, request }) {\n    // Modify the response data here mapUrls\n    try {\n        const dictionary = getModel([\"api\"])?.api || {};\n        const requests = getModel(\"requests\") || {\n            //to check whether \n            //requires merging the header for request or not\n            enabled: false,\n            headers: {},\n            //the prefix to be merged with endpoint path\n            //example: www.domain.com/prefix/api/example\n            prefix: \"\",\n        };\n\n        //to replace the url with alternative from abc\n        request.url = mapUrls(request.url, dictionary);\n        if (requests.enabled) {\n            //merge prefix with url\n            request.url = addQuarantineSegmentToUrl(request.url, requests.prefix);\n            //merge existing header with new one\n            // request.headers = mergeHeaders(request.headers, {\n            //     ...requests?.headers,\n            // });\n        }\n        console.log(\n            requests,\n            request?.headers,\n            requests?.enabled,\n            request?.url,\n            \"[requestInterceptor] details\"\n        );\n        return request;\n    } catch(error) {\n        console.log('[requestInterceptor] error:',error)\n        return request\n    }\n}\n\nexport {\n    requestInterceptor,\n    responseInterceptor\n}"],"names":["mapUrls","url","urlMappings","addQuarantineSegmentToUrl","originalUrl","quarantineSegment","URL","pathname","console","log","modifiedUrl","toString","groupByPrefixAndStructure","data","grouped","key","hasOwnProperty","parts","split","prefix","valueObject","defaultValue","result","_extends","keyWithoutPrefix","slice","join","ABCProvider","_ref","children","getModel","updateModel","model","_getModel","_getModel$misc","misc","iamABCTester","abcScope","abcEndpoint","abcEnable","abcSdk","_getModel$misc$abcTim","abcTimeout","_useState","useState","isReady","setIsReady","arrayChildren","Children","toArray","gb","useMemo","GrowthBook","apiHost","clientKey","useEffect","loadFeatures","timeout","then","evaluateFeatures","allFeatures","getFeatures","done","Object","keys","map","getFeatureValue","groupedData","React","createElement","GrowthBookProvider","growthbook","child","index","cloneElement","responseInterceptor","response","_getModel2","_response","dictionary","responseUrl","config","merge","error","requestInterceptor","_ref2","request","_getModel3","api","requests","enabled","headers"],"mappings":"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AAEEc,IAAAA,gBAAgB,EAAE,CAAA;AAClBnD,IAAAA,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC,CAAA;GAChC,EAAE,CAACoC,OAAO,EAAEb,KAAK,CAACG,IAAI,CAACC,YAAY,CAAC,CAAC,CAAA;AAEtC5B,EAAAA,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAE2B,YAAY,CAAC,CAAA;AASxD,EAAA;AAAA;AACI;IACFgC,yBAAA,CAAAC,aAAA,CAACC,kCAAkB,EAAA;AAACC,MAAAA,UAAU,EAAErB,EAAAA;KAC7BF,EAAAA,cAAQ,CAACiB,GAAG,CAAClB,aAAa,EAAE,UAACyB,KAAK,EAAEC,KAAK,EAAK;AAC7CjE,MAAAA,OAAO,CAACC,GAAG,CAACgE,KAAK,EAAE,gBAAgB,CAAC,CAAA;AACpC,MAAA,OAAOC,kBAAY,CAACF,KAAK,EAAE,EAAE,CAAC,CAAA;AAChC,KAAC,CACiB,CAAA;AAAC,IAAA;AAEzB,EAAC;;AAID;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAE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"}