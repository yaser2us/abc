{"version":3,"file":"index.js","sources":["../src/tools/Tools.js","../src/interceptors/Interceptors.js","../src/interceptors/Fetch.js","../src/providers/ABCProvider.js"],"sourcesContent":["import URL from \"url-parse\";\n\nfunction mapUrls(url, urlMappings) {\n    if (urlMappings[url]) {\n        return urlMappings[url];\n    }\n    return url;\n}\n\nfunction addQuarantineSegmentToUrl(originalUrl, quarantineSegment = \"\") {\n    if (quarantineSegment === \"\") return originalUrl;\n\n    // Parse the original URL\n    const url = new URL(originalUrl);\n\n    // Insert the quarantine segment after the domain in the pathname\n    url.pathname = `/${quarantineSegment}${url?.pathname}`;\n    // Get the modified URL\n    const modifiedUrl = url.toString();\n\n    return modifiedUrl;\n}\n\nfunction mergeHeaders(originalHeaders = {}, newHeaders = {}) {\n    // Get the modified headers\n    const modifiedHeaders = merge(originalHeaders, newHeaders);\n    return modifiedHeaders;\n}\n\nfunction groupByPrefixAndStructureV1(data) {\n    let grouped = {};\n\n    for (const key in data) {\n        if (data.hasOwnProperty(key)) {\n            const parts = key.split(\"-\");\n            const prefix = parts[0];\n            const valueObject = data[key];\n\n            if (!grouped[prefix]) {\n                grouped[prefix] = {};\n            }\n\n            if (prefix === \"api\") {\n                const defaultValue = valueObject.defaultValue;\n                const result = valueObject.result;\n                // Use \"defaultValue\" as key and \"result\" as value for \"api\" prefix\n                grouped[prefix][defaultValue] = result;\n            } else if (prefix === \"response\") {\n                const result = valueObject.result;\n\n                grouped[prefix] = {\n                    ...grouped[prefix],\n                    ...result,\n                };\n            } else if (prefix === \"context\") {\n                const result = valueObject.result;\n\n                grouped = {\n                    ...grouped,\n                    ...result,\n                };\n            }\n        }\n    }\n\n    return grouped;\n}\n\nfunction groupByPrefixAndStructure(data) {\n    let grouped = {};\n\n    for (const key in data) {\n        if (data.hasOwnProperty(key)) {\n            const parts = key.split(\"-\");\n            const prefix = parts[0];\n            const valueObject = data[key];\n\n            if (!grouped[prefix]) {\n                grouped[prefix] = {};\n            }\n\n            if (prefix === \"api\") {\n                const defaultValue = valueObject.defaultValue;\n                const result = valueObject.result;\n                // Use \"defaultValue\" as key and \"result\" as value for \"api\" prefix\n                grouped[prefix][defaultValue] = result;\n            } else if (prefix === \"response\" || prefix === \"navigation\") {\n                const result = valueObject.result;\n\n                grouped[prefix] = {\n                    ...grouped[prefix],\n                    ...result,\n                };\n            } else if (prefix === \"context\") {\n                const result = valueObject.result;\n\n                grouped = {\n                    ...grouped,\n                    ...result,\n                };\n            }\n        }\n    }\n\n    return grouped;\n}\n\nexport {\n    mergeHeaders,\n    addQuarantineSegmentToUrl,\n    groupByPrefixAndStructure,\n    mapUrls\n}","import { merge } from \"lodash\";\n\nimport {\n    addQuarantineSegmentToUrl,\n    mapUrls\n} from \"../tools\"\n\nfunction responseInterceptor({ getModel, response, debug = false }) {\n    // Modify the response data here mapUrls\n    try {\n        const dictionary = getModel([\"response\"])?.response || {};\n        const responseUrl = response.config.url;\n\n        response = merge(response, mapUrls(responseUrl, dictionary));\n        if (debug) {\n            console.log(\"[responseInterceptor] Request URL:\", responseUrl);\n            console.log(\"[responseInterceptor] context\", getModel([\"response\"])?.response);\n            console.log(\"[responseInterceptor] data\", response?.data);\n        }\n        return response;\n    } catch (error) {\n        if (debug) {\n            console.log('[responseInterceptor]', error)\n        }\n        return response\n    }\n}\nfunction requestInterceptor({ getModel, request, debug = false }) {\n    // Modify the response data here mapUrls\n    try {\n        const dictionary = getModel([\"api\"])?.api || {};\n        const requests = getModel(\"requests\") || {\n            //to check whether \n            //requires merging the header for request or not\n            enabled: false,\n            headers: {},\n            //the prefix to be merged with endpoint path\n            //example: www.domain.com/prefix/api/example\n            prefix: \"\",\n        };\n\n        //to replace the url with alternative from abc\n        request.url = mapUrls(request.url, dictionary);\n        if (requests.enabled) {\n            //merge prefix with url\n            request.url = addQuarantineSegmentToUrl(request.url, requests.prefix);\n        }\n        if (debug) {\n            console.log(\n                requests,\n                request?.headers,\n                requests?.enabled,\n                request?.url,\n                \"[requestInterceptor] details\"\n            );\n        }\n        return request;\n    } catch (error) {\n        if (debug) {\n            console.log('[requestInterceptor] error:', error)\n        }\n        return request\n    }\n}\n\nexport {\n    requestInterceptor,\n    responseInterceptor\n}","import fetchIntercept from 'fetch-intercept';\nimport { merge } from \"lodash\";\n\nimport {\n    addQuarantineSegmentToUrl,\n    mapUrls\n} from \"../tools\"\n\nclass FetchInterceptor {\n\n    constructor(getModel, debug = true) {\n        this.unregister = fetchIntercept.register({\n            response: async function (response) {\n                // Modify the reponse object\n                console.log('[responseInterceptor] [fetch] response', response)\n                try {\n                    const dictionary = getModel([\"response\"])?.response || {};\n                    const responseUrl = response.url;\n                    const r = await response?.json()\n\n                    response = merge(r, mapUrls(responseUrl, dictionary));\n                    \n                    if (debug) {\n                        console.log(\"[responseInterceptor] [fetch] mapUrls:\", mapUrls(responseUrl, dictionary));\n                        console.log(\"[responseInterceptor] [fetch] Request URL:\", responseUrl);\n                        console.log(\"[responseInterceptor] [fetch] context\", getModel(\"response\"));\n                        console.log(\"[responseInterceptor] [fetch] data\", r);\n                    }\n                    return response;\n                } catch (error) {\n                    if (debug) {\n                        console.log('[responseInterceptor] [fetch] error', error)\n                    }\n                    return response\n                }\n            },\n            request: function (url, config) {\n\n\n                // Modify the url or config here\n                console.log(url, config, '[requestInterceptor] [fetch] request')\n                let newUrl = url;\n                try {\n                    const dictionary = getModel([\"api\"])?.api || {};\n                    const requests = getModel(\"requests\") || {\n                        //to check whether \n                        //requires merging the header for request or not\n                        enabled: false,\n                        headers: {},\n                        //the prefix to be merged with endpoint path\n                        //example: www.domain.com/prefix/api/example\n                        prefix: \"\",\n                    };\n\n                    //to replace the url with alternative from abc\n                    newUrl = mapUrls(newUrl, dictionary);\n                    if (requests.enabled) {\n                        //merge prefix with url\n                        newUrl = addQuarantineSegmentToUrl(newUrl, requests.prefix);\n                    }\n                    if (debug) {\n                        console.log(\n                            requests,\n                            config?.headers,\n                            requests?.enabled,\n                            url,\n                            newUrl,\n                            \"[requestInterceptor] [fetch] details\"\n                        );\n                    }\n                    return [newUrl, config]\n                } catch (error) {\n                    if (debug) {\n                        console.log('[requestInterceptor] [fetch] error:', error)\n                    }\n                    return [url, config]\n                }\n            },\n\n            requestError: function (error) {\n                // Called when an error occured during another 'request' interceptor call\n                return Promise.reject(error);\n            },\n            responseError: function (error) {\n                // Handle an fetch error\n                return Promise.reject(error);\n            }\n        });\n    }\n\n    unRegister() {\n        return this.unregister;\n    }\n\n}\n\n\n\n\nexport default FetchInterceptor\n\n","import React, {\n  useEffect,\n  useState,\n  useMemo,\n  Children,\n  cloneElement\n} from \"react\";\n\nimport {\n  GrowthBook,\n  GrowthBookProvider,\n} from \"@growthbook/growthbook-react\";\n\nimport { FetchInterceptor } from \"../interceptors\";\nimport {\n  groupByPrefixAndStructure\n} from \"../tools\"\n\nconst ABCProvider = ({ \n  children, \n  getModel, \n  updateModel, \n  model,\n  analytic, \n  debug = false,\n  event: {\n    eventType = \"view_screen\",\n    eventName = \"screen_name\",\n    eventValue = \"abc-platform\"\n  } = {}\n}) => {\n  const {\n    misc: {\n      abcTesting: {\n        iamABCTester = false,\n        abcScope = 888888,\n        abcEndpoint,\n        // abcEnable,\n        abcSdk,\n        abcTimeout = 30000,\n        abcDefaultAttributes = {}\n      } = {}\n    },\n  } = getModel([\"misc\"]);\n\n  console.log('apcProvider', model?.misc?.abcTesting?.abcEnable, iamABCTester)\n\n  const [isReady, setIsReady] = useState(false);\n\n  const arrayChildren = Children.toArray(children);\n\n  const gb = useMemo(\n    () => {\n      if (iamABCTester && model?.misc?.abcTesting?.abcEnable) {\n        const fetchInterceptor = new FetchInterceptor(getModel, true)\n        // console.log(iamABCTester, \"iamABCTesteriamABCTester useMemo\");\n        const gb = new GrowthBook({\n          apiHost: abcEndpoint,\n          clientKey: abcSdk,\n          // Enable easier debugging during development\n          // enableDevMode: true,\n          // Update the instance in realtime as features change in GrowthBook\n          // subscribeToChanges: true,\n          // Only required for A/B testing\n          // Called every time a user is put into an experiment\n          // trackingCallback: (experiment, result) => {\n          //   console.log(\"Experiment Viewed\", {\n          //     experimentId: experiment.key,\n          //     variationId: result.key,\n          //   });\n          // },\n          // onFeatureUsage: (featureKey, result) => {\n          //   console.log(\"feature\", featureKey, \"has value\", result.value);\n          // },\n        });\n        return gb;\n      }\n    },\n    [abcEndpoint, iamABCTester]\n  );\n\n  useEffect(() => {\n    if (model?.misc?.abcTesting?.iamABCTester && model?.misc?.abcTesting?.abcEnable) {\n      if (analytic && analytic instanceof Function) {\n        try {\n          logEvent(eventType, {\n            [eventName]: eventValue\n          });\n        } catch (error) {\n          if (debug) {\n            console.log(error);\n          }\n        }\n      }\n\n      gb.loadFeatures({\n        timeout: abcTimeout,\n      }).then(() => {\n        setIsReady(true);\n      });\n      gb.setAttributes({\n        ...abcDefaultAttributes,\n        scope: abcScope\n      });\n    }\n  }, [model?.misc?.abcTesting?.abcEnable, model?.misc?.abcTesting?.iamABCTester]);\n\n  const evaluateFeatures = () => {\n    if (iamABCTester && model?.misc?.abcTesting?.abcEnable) {\n\n      try {\n        const allFeatures = gb.getFeatures();\n\n        let done = {};\n        Object.keys(allFeatures).map((key) => {\n          const result = gb.getFeatureValue(key, allFeatures[key].defaultValue);\n          done[key] = {\n            defaultValue: allFeatures[key].defaultValue,\n            result,\n          };\n        });\n\n        // Call the function to group by prefix\n        const groupedData = groupByPrefixAndStructure(done);\n\n        updateModel({ ...groupedData });\n      } catch (error) {\n        if (debug) {\n          console.log(error);\n        }\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (!isReady) {\n      return;\n    }\n\n    evaluateFeatures();\n  }, [isReady, model?.misc?.abcTesting?.iamABCTester]);\n\n  return (\n    <GrowthBookProvider growthbook={gb}>\n      {Children.map(arrayChildren, (child) => {\n        return cloneElement(child, {});\n      })}\n    </GrowthBookProvider>\n  );\n};\n\nexport default ABCProvider;"],"names":["mapUrls","url","urlMappings","addQuarantineSegmentToUrl","originalUrl","quarantineSegment","URL","pathname","modifiedUrl","toString","groupByPrefixAndStructure","data","grouped","key","hasOwnProperty","parts","split","prefix","valueObject","defaultValue","result","_extends","responseInterceptor","_ref","getModel","response","_ref$debug","debug","_getModel","dictionary","responseUrl","config","merge","_getModel2","_response","console","log","error","requestInterceptor","_ref2","request","_ref2$debug","_getModel3","api","requests","enabled","headers","_catch","body","recover","e","then","FetchInterceptor","unregister","fetchIntercept","register","Promise","resolve","_response2","json","r","reject","newUrl","requestError","responseError","_proto","prototype","unRegister","ABCProvider","_model$misc","_model$misc5","_model$misc6","_model$misc8","children","updateModel","model","analytic","_ref$event","event","_ref$event2","_ref$event2$eventType","eventType","_ref$event2$eventName","eventName","_ref$event2$eventValu","eventValue","_getModel$misc$abcTes","misc","abcTesting","_getModel$misc$abcTes2","_getModel$misc$abcTes3","iamABCTester","_getModel$misc$abcTes4","abcScope","abcEndpoint","abcSdk","_getModel$misc$abcTes5","abcTimeout","_getModel$misc$abcTes6","abcDefaultAttributes","abcEnable","_useState","useState","isReady","setIsReady","arrayChildren","Children","toArray","gb","useMemo","_model$misc2","GrowthBook","apiHost","clientKey","useEffect","_model$misc3","_model$misc4","Function","_logEvent","logEvent","loadFeatures","timeout","setAttributes","scope","evaluateFeatures","_model$misc7","allFeatures","getFeatures","done","Object","keys","map","getFeatureValue","groupedData","React","createElement","GrowthBookProvider","growthbook","child","cloneElement"],"mappings":"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"}