{"version":3,"file":"index.modern.mjs","sources":["../src/tools/Tools.js","../src/providers/ABCProvider.js","../src/interceptors/Interceptors.js"],"sourcesContent":["import URL from \"url-parse\";\n\nfunction mapUrls(url, urlMappings) {\n    if (urlMappings[url]) {\n        return urlMappings[url];\n    }\n    return url;\n}\n\nfunction addQuarantineSegmentToUrl(originalUrl, quarantineSegment = \"\") {\n    if (quarantineSegment === \"\") return originalUrl;\n\n    // Parse the original URL\n    const url = new URL(originalUrl);\n\n    // Insert the quarantine segment after the domain in the pathname\n    url.pathname = `/${quarantineSegment}${url?.pathname}`;\n    // Get the modified URL\n    const modifiedUrl = url.toString();\n\n    return modifiedUrl;\n}\n\nfunction mergeHeaders(originalHeaders = {}, newHeaders = {}) {\n    // Get the modified headers\n    const modifiedHeaders = merge(originalHeaders, newHeaders);\n    return modifiedHeaders;\n}\n\nfunction groupByPrefixAndStructureV1(data) {\n    let grouped = {};\n\n    for (const key in data) {\n        if (data.hasOwnProperty(key)) {\n            const parts = key.split(\"-\");\n            const prefix = parts[0];\n            const valueObject = data[key];\n\n            if (!grouped[prefix]) {\n                grouped[prefix] = {};\n            }\n\n            if (prefix === \"api\") {\n                const defaultValue = valueObject.defaultValue;\n                const result = valueObject.result;\n                // Use \"defaultValue\" as key and \"result\" as value for \"api\" prefix\n                grouped[prefix][defaultValue] = result;\n            } else if (prefix === \"response\") {\n                const result = valueObject.result;\n\n                grouped[prefix] = {\n                    ...grouped[prefix],\n                    ...result,\n                };\n            } else if (prefix === \"context\") {\n                const result = valueObject.result;\n\n                grouped = {\n                    ...grouped,\n                    ...result,\n                };\n            }\n        }\n    }\n\n    return grouped;\n}\n\nfunction groupByPrefixAndStructure(data) {\n    let grouped = {};\n\n    for (const key in data) {\n        if (data.hasOwnProperty(key)) {\n            const parts = key.split(\"-\");\n            const prefix = parts[0];\n            const valueObject = data[key];\n\n            if (!grouped[prefix]) {\n                grouped[prefix] = {};\n            }\n\n            if (prefix === \"api\") {\n                const defaultValue = valueObject.defaultValue;\n                const result = valueObject.result;\n                // Use \"defaultValue\" as key and \"result\" as value for \"api\" prefix\n                grouped[prefix][defaultValue] = result;\n            } else if (prefix === \"response\" || prefix === \"navigation\") {\n                const result = valueObject.result;\n                grouped[prefix] = {\n                    ...grouped[prefix],\n                    ...result,\n                };\n            } else if (prefix === \"context\") {\n                const result = valueObject.result;\n\n                grouped = {\n                    ...grouped,\n                    ...result,\n                };\n            }\n        }\n    }\n\n    return grouped;\n}\n\nexport {\n    mergeHeaders,\n    addQuarantineSegmentToUrl,\n    groupByPrefixAndStructure,\n    mapUrls\n}","import React, {\n  useEffect,\n  useState,\n  useMemo,\n  Children,\n  cloneElement\n} from \"react\";\n\nimport {\n  GrowthBook,\n  GrowthBookProvider,\n} from \"@growthbook/growthbook-react\";\n\nimport {\n  groupByPrefixAndStructure\n} from \"../tools\"\n\nconst ABCProvider = ({\n  children,\n  getModel,\n  updateModel,\n  model,\n  analytic,\n  debug = false,\n  event: {\n    eventType = \"view_screen\",\n    eventName = \"screen_name\",\n    eventValue = \"abc-platform\"\n  } = {}\n}) => {\n  const {\n    misc: {\n      abcTesting: {\n        iamABCTester = false,\n        abcScope = 888888,\n        abcEndpoint,\n        // abcEnable,\n        abcSdk,\n        abcTimeout = 30000,\n        abcDefaultAttributes = {}\n      } = {}\n    },\n  } = getModel([\"misc\"]);\n\n  const [isReady, setIsReady] = useState(\"FALSE\");\n\n  const arrayChildren = Children.toArray(children);\n\n  const gb = useMemo(\n    () => {\n      if (iamABCTester && model?.misc?.abcTesting?.abcEnable) {\n        // console.log(iamABCTester, \"iamABCTesteriamABCTester useMemo\");\n        const gb = new GrowthBook({\n          apiHost: abcEndpoint,\n          clientKey: abcSdk,\n          // Enable easier debugging during development\n          // enableDevMode: true,\n          // Update the instance in realtime as features change in GrowthBook\n          // subscribeToChanges: true,\n          // Only required for A/B testing\n          // Called every time a user is put into an experiment\n          trackingCallback: (experiment, result) => {\n            if (analytic && analytic instanceof Function) {\n              try {\n                console.log(\"[abc] abc-experiment-done\", {\n                  experimentId: experiment.key,\n                  variationId: result.key,\n                });\n                analytic(\"abc-experiment-done\", {\n                  experimentId: experiment?.key,\n                  variationId: result?.key,\n                });\n              } catch (error) {\n                if (debug) {\n                  console.log('[abc]', error);\n                }\n              }\n            }\n            \n          },\n          // onFeatureUsage: (featureKey, result) => {\n          //   console.log(\"feature\", featureKey, \"has value\", result.value);\n          // },\n        });\n        return gb;\n      }\n    },\n    [abcEndpoint, iamABCTester]\n  );\n\n  useEffect(() => {\n    if (model?.misc?.abcTesting?.iamABCTester && model?.misc?.abcTesting?.abcEnable) {\n      if (analytic && analytic instanceof Function) {\n        try {\n          analytic(eventType, {\n            [eventName]: eventValue\n          });\n        } catch (error) {\n          if (debug) {\n            console.log('[abc]', error);\n          }\n        }\n      }\n\n      gb.init({\n        timeout: abcTimeout,\n      }).then(() => {\n        setIsReady(Date.now());\n      });\n      gb.setAttributes({\n        ...abcDefaultAttributes,\n        ...(model?.user && model.user || {}),\n        ...(model?.cohort && model?.cohort || {}),\n        scope: abcScope\n      });\n    }\n  }, [model?.misc?.abcTesting?.abcEnable, model?.misc?.abcTesting?.iamABCTester, model?.user, model?.cohort]);\n\n  const evaluateFeatures = () => {\n    if (iamABCTester && model?.misc?.abcTesting?.abcEnable) {\n\n      try {\n        const allFeatures = gb.getFeatures();\n\n        let done = {};\n        Object.keys(allFeatures).map((key) => {\n          const result = gb.getFeatureValue(key, allFeatures[key].defaultValue);\n          done[key] = {\n            defaultValue: allFeatures[key].defaultValue,\n            result,\n          };\n        });\n\n        // Call the function to group by prefix\n        const groupedData = groupByPrefixAndStructure(done);\n\n        updateModel({ ...groupedData });\n      } catch (error) {\n        if (debug) {\n          console.log('[abc]', error);\n        }\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (Boolean(isReady === \"FALSE\")) {\n      return;\n    }\n\n    evaluateFeatures();\n  }, [isReady, model?.misc?.abcTesting?.iamABCTester]);\n\n  return (\n    <GrowthBookProvider growthbook={gb}>\n      {Children.map(arrayChildren, (child) => {\n        return cloneElement(child, {});\n      })}\n    </GrowthBookProvider>\n  );\n};\n\nexport default ABCProvider;","import { merge } from \"lodash\";\n\nimport {\n    addQuarantineSegmentToUrl,\n    mapUrls\n} from \"../tools\"\n\nfunction responseInterceptor({ getModel, response, debug = false }) {\n    // Modify the response data here mapUrls\n    try {\n        const dictionary = getModel([\"response\"])?.response || {};\n        const responseUrl = response.config.url;\n\n        response = merge(response, mapUrls(responseUrl, dictionary));\n        if (debug) {\n            console.log(\"[responseInterceptor] Request URL:\", responseUrl);\n            console.log(\"[responseInterceptor] context\", getModel([\"response\"])?.response);\n            console.log(\"[responseInterceptor] data\", response?.data);\n        }\n        return response;\n    } catch (error) {\n        if (debug) {\n            console.log('[responseInterceptor]', error)\n        }\n        return response\n    }\n}\nfunction requestInterceptor({ getModel, request, debug = false }) {\n    // Modify the response data here mapUrls\n    try {\n        const dictionary = getModel([\"api\"])?.api || {};\n        const requests = getModel(\"requests\") || {\n            //to check whether \n            //requires merging the header for request or not\n            enabled: false,\n            headers: {},\n            //the prefix to be merged with endpoint path\n            //example: www.domain.com/prefix/api/example\n            prefix: \"\",\n        };\n\n        //to replace the url with alternative from abc\n        request.url = mapUrls(request.url, dictionary);\n        if (requests.enabled) {\n            //merge prefix with url\n            request.url = addQuarantineSegmentToUrl(request.url, requests.prefix);\n        }\n        if (debug) {\n            console.log(\n                requests,\n                request?.headers,\n                requests?.enabled,\n                request?.url,\n                \"[requestInterceptor] details\"\n            );\n        }\n        return request;\n    } catch (error) {\n        if (debug) {\n            console.log('[requestInterceptor] error:', error)\n        }\n        return request\n    }\n}\n\nexport {\n    requestInterceptor,\n    responseInterceptor\n}"],"names":["mapUrls","url","urlMappings","addQuarantineSegmentToUrl","originalUrl","quarantineSegment","URL","pathname","modifiedUrl","toString","groupByPrefixAndStructure","data","grouped","key","hasOwnProperty","parts","split","prefix","valueObject","defaultValue","result","_extends","ABCProvider","children","getModel","updateModel","model","analytic","debug","event","eventType","eventName","eventValue","_model$misc4","_model$misc5","_model$misc7","misc","abcTesting","iamABCTester","abcScope","abcEndpoint","abcSdk","abcTimeout","abcDefaultAttributes","isReady","setIsReady","useState","arrayChildren","Children","toArray","gb","useMemo","_model$misc","abcEnable","GrowthBook","apiHost","clientKey","trackingCallback","experiment","Function","console","log","experimentId","variationId","error","useEffect","_model$misc2","_model$misc3","init","timeout","then","Date","now","setAttributes","user","cohort","scope","evaluateFeatures","_model$misc6","allFeatures","getFeatures","done","Object","keys","map","getFeatureValue","groupedData","Boolean","React","createElement","GrowthBookProvider","growthbook","child","cloneElement","responseInterceptor","response","_getModel","dictionary","responseUrl","config","merge","_getModel2","_response","requestInterceptor","request","_getModel3","api","requests","enabled","headers"],"mappings":"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"}